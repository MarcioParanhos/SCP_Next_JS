datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}



model User {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  createdAt DateTime @default(now())
}


model Nte {
  id             Int            @id @default(autoincrement())
  name           String
  municipalities Municipality[]

  @@map("nte")
}


model Municipality {
  id        Int          @id @default(autoincrement())
  name      String
  nte_id    Int
  nte       Nte          @relation(fields: [nte_id], references: [id])
  schools   SchoolUnit[]

  @@map("municipalities")
}


model SchoolUnit {
  id              Int          @id @default(autoincrement())
  name            String
  sec_cod         String       @map("sec_cod")
  status          String
  typology_id     Int?
  typology        Typology?   @relation(fields: [typology_id], references: [id])
  municipality_id Int
  municipality    Municipality @relation(fields: [municipality_id], references: [id])

  @@map("school_units")
}


model Discipline {
  id   Int    @id @default(autoincrement())
  name String

  @@map("disciplines")
}


model Typology {
  id    Int          @id @default(autoincrement())
  name  String
  units SchoolUnit[]

  @@map("typologies")
}
